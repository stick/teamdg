%h3
  #{@event.name} Standings
  - if @event.rr_matches_completed >= 100
    %a.btn.btn-success{ type: 'button', href: url("/event/#{@event.id}/semifinals") } Setup Semi-Finals
%h5
  Round Robin Progress
  - if @event.rr_matches_completed < 100
    - unless @public
      %a{ href: url("/event/#{@event.id}/matches/games/unreported") } #{icon('user-times', tooltip: 'Unreported Player Matches')}
.progress.hidden-xs
  .progress-bar{ role: 'progressbar', 'aria-valuemin': 0, 'aria-valuemax': 100, 'aria-valuenow': @event.rr_matches_completed, style: "width:#{@event.rr_matches_completed}%" } #{@event.rr_matches_completed}%

.row
  - @event.groups.each do |group|
    .col-lg-6.col-sm-6
      %table.table.table-condensed.table-responsive
        %thead
          %tr
            %th &nbsp;
            %th #{group.name}
            %th
              %small Points
            %th.hidden-xs
              %small
                1<sup>st</sup> TB
            %th.hidden-xs
              %small
                2<sup>nd</sup> TB
            %th.hidden-xs &nbsp;
        - group.teams.sort{ |x,y| [ x.points, x.holes_up, x.holes_remaining ] <=> [ y.points, y.holes_up, y.holes_remaining ] }.reverse.each_with_index do |team, index|
          %tr
            %td #{ordinalize(index + 1)}
            %td.team_name
              - if @public
                %a{ href: url("/#{@event.url}/team/#{CGI::escape(team.name)}/") } #{team.name}
              - else
                %a{ href: url("/event/#{@event.id}/matches/team/#{team.id}/") } #{team.name}
            %td.team_points #{team.points.to_i}
            %td.tie_breaker_1.hidden-xs #{team.holes_up}
            %td.tie_breaker_2.hidden-xs #{team.holes_remaining}
            %td.advance.hidden-xs.hidden-sm
              - if @event.rr_matches_completed >= 100
                - if index < @event.group_advance
                  #{icon('trophy')}

.row
  - @event.groups.each do |group|
    .panel.panel-primary
      .panel-heading
        #{group.name} Seed Standings
        %i.fa.fa-question-circle.fa-fw{ data: { container: 'body', toggle: 'popover', placement: 'top', title: 'Seed Standings',  content: 'Ranked based on<ol><li>Wins</li><li>Ties</li><li>Losses</li><li>Holes Up</li><li>Holes Remaining</li></ul>' } }
      .panel-body
        %ul.nav.nav-tabs{ role: 'tablist' }
          - @event.team_seeds.each_with_index do |seed, i|
            %li{ role: 'presentation', class: i == 0 ? 'active' : '' }
              %a{ href: "##{group.name.downcase}_#{seed.capitalize}", role: 'tab', data: { toggle: 'tab' } } #{seed}
        .tab-content
          - @event.team_seeds.each_with_index do |seed, i|
            .tab-pane{ id: [group.name.downcase, seed.capitalize], role: 'tabpanel', class: i == 0 ? 'active' : '' }
              %table.table.table-responsive
                %thead
                  %tr
                    %th &nbsp;
                    %th #{seed}
                    %th Wins
                    %th Ties
                    %th Losses
                    %th.hidden-xs Holes Up
                    %th.hidden-xs Holes Remaining
                %tbody
                -# - group.seed_winner(seed).each do |player|
                - group.seed_winners[seed].each do |player|
                  %tr
                    %td #{ordinalize(player[:rank])}
                    %td
                      - if @public
                        %a{ href: url("/#{@event.url}/player/#{CGI::escape(player.name)}") } #{player.name}
                      - else
                        %a{ href: url("/event/#{@event.id}/matches/player/#{player.id}") } #{player.name}
                      - if @event.rr_matches_completed >= 100
                        - if player[:rank].to_i == 1
                          #{icon('trophy')}
                    %td #{player.rr_wins}
                    %td #{player.rr_ties}
                    %td #{player.rr_losses}
                    %td.hidden-xs #{player.rr_holes_up}
                    %td.hidden-xs #{player.rr_holes_remaining}


:javascript
  $(document).ready(function(){
    $('[data-toggle="popover"]').popover({ 'trigger': 'hover', 'html': 'true' });
  });
